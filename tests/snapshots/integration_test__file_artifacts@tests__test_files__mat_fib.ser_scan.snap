---
source: tests/integration_test.rs
expression: result
---
<Type         "type"        [1]>
<Identifier   "twoxtwomatrix" [1]>
<Struct       "struct"      [1]>
<LeftBrace    "{"           [1]>
<Identifier   "a"           [2]>
<Colon        ":"           [2]>
<SimpleType   "int"         [2]>
<Comma        ","           [2]>
<Identifier   "b"           [3]>
<Colon        ":"           [3]>
<SimpleType   "int"         [3]>
<Comma        ","           [3]>
<Identifier   "c"           [4]>
<Colon        ":"           [4]>
<SimpleType   "int"         [4]>
<Comma        ","           [4]>
<Identifier   "d"           [5]>
<Colon        ":"           [5]>
<SimpleType   "int"         [5]>
<Comma        ","           [5]>
<RightBrace   "}"           [6]>
<Semicolon    ";"           [6]>
<Fun          "fn"          [8]>
<Identifier   "matMult"     [8]>
<LeftParen    "("           [8]>
<Identifier   "ma"          [8]>
<Colon        ":"           [8]>
<Star         "*"           [8]>
<Struct       "struct"      [8]>
<Identifier   "twoxtwomatrix" [8]>
<Comma        ","           [8]>
<Identifier   "mb"          [8]>
<Colon        ":"           [8]>
<Star         "*"           [8]>
<Struct       "struct"      [8]>
<Identifier   "twoxtwomatrix" [8]>
<RightParen   ")"           [8]>
<RightArrow   "->"          [8]>
<Struct       "struct"      [8]>
<Identifier   "twoxtwomatrix" [8]>
<LeftBrace    "{"           [8]>
<Return       "return"      [9]>
<Struct       "struct"      [9]>
<Identifier   "twoxtwomatrix" [9]>
<LeftBrace    "{"           [9]>
<Identifier   "a"           [10]>
<Colon        ":"           [10]>
<Identifier   "ma"          [10]>
<RightArrow   "->"          [10]>
<Identifier   "a"           [10]>
<Star         "*"           [10]>
<Identifier   "mb"          [10]>
<RightArrow   "->"          [10]>
<Identifier   "a"           [10]>
<Plus         "+"           [10]>
<Identifier   "ma"          [10]>
<RightArrow   "->"          [10]>
<Identifier   "b"           [10]>
<Star         "*"           [10]>
<Identifier   "mb"          [10]>
<RightArrow   "->"          [10]>
<Identifier   "c"           [10]>
<Comma        ","           [10]>
<Identifier   "b"           [11]>
<Colon        ":"           [11]>
<Identifier   "ma"          [11]>
<RightArrow   "->"          [11]>
<Identifier   "a"           [11]>
<Star         "*"           [11]>
<Identifier   "mb"          [11]>
<RightArrow   "->"          [11]>
<Identifier   "b"           [11]>
<Plus         "+"           [11]>
<Identifier   "ma"          [11]>
<RightArrow   "->"          [11]>
<Identifier   "b"           [11]>
<Star         "*"           [11]>
<Identifier   "mb"          [11]>
<RightArrow   "->"          [11]>
<Identifier   "d"           [11]>
<Comma        ","           [11]>
<Identifier   "c"           [12]>
<Colon        ":"           [12]>
<Identifier   "ma"          [12]>
<RightArrow   "->"          [12]>
<Identifier   "c"           [12]>
<Star         "*"           [12]>
<Identifier   "mb"          [12]>
<RightArrow   "->"          [12]>
<Identifier   "a"           [12]>
<Plus         "+"           [12]>
<Identifier   "ma"          [12]>
<RightArrow   "->"          [12]>
<Identifier   "d"           [12]>
<Star         "*"           [12]>
<Identifier   "mb"          [12]>
<RightArrow   "->"          [12]>
<Identifier   "c"           [12]>
<Comma        ","           [12]>
<Identifier   "d"           [13]>
<Colon        ":"           [13]>
<Identifier   "ma"          [13]>
<RightArrow   "->"          [13]>
<Identifier   "c"           [13]>
<Star         "*"           [13]>
<Identifier   "mb"          [13]>
<RightArrow   "->"          [13]>
<Identifier   "b"           [13]>
<Plus         "+"           [13]>
<Identifier   "ma"          [13]>
<RightArrow   "->"          [13]>
<Identifier   "d"           [13]>
<Star         "*"           [13]>
<Identifier   "mb"          [13]>
<RightArrow   "->"          [13]>
<Identifier   "d"           [13]>
<Comma        ","           [13]>
<RightBrace   "}"           [14]>
<Semicolon    ";"           [14]>
<RightBrace   "}"           [15]>
<Fun          "fn"          [17]>
<Identifier   "printmat"    [17]>
<LeftParen    "("           [17]>
<Identifier   "m"           [17]>
<Colon        ":"           [17]>
<Star         "*"           [17]>
<Struct       "struct"      [17]>
<Identifier   "twoxtwomatrix" [17]>
<RightParen   ")"           [17]>
<LeftBrace    "{"           [17]>
<Identifier   "printf"      [18]>
<LeftParen    "("           [18]>
<String       "\"%d %d\\n%d %d\\n\"" [18]>
<Comma        ","           [18]>
<Identifier   "m"           [18]>
<RightArrow   "->"          [18]>
<Identifier   "a"           [18]>
<Comma        ","           [18]>
<Identifier   "m"           [18]>
<RightArrow   "->"          [18]>
<Identifier   "b"           [18]>
<Comma        ","           [18]>
<Identifier   "m"           [18]>
<RightArrow   "->"          [18]>
<Identifier   "c"           [18]>
<Comma        ","           [18]>
<Identifier   "m"           [18]>
<RightArrow   "->"          [18]>
<Identifier   "d"           [18]>
<RightParen   ")"           [18]>
<Semicolon    ";"           [18]>
<RightBrace   "}"           [19]>
<Fun          "fn"          [21]>
<Identifier   "fib_mat"     [21]>
<LeftParen    "("           [21]>
<Identifier   "n"           [21]>
<Colon        ":"           [21]>
<SimpleType   "int"         [21]>
<RightParen   ")"           [21]>
<RightArrow   "->"          [21]>
<Struct       "struct"      [21]>
<Identifier   "twoxtwomatrix" [21]>
<LeftBrace    "{"           [21]>
<Var          "let"         [22]>
<Identifier   "baseMat"     [22]>
<Equal        "="           [22]>
<Struct       "struct"      [22]>
<Identifier   "twoxtwomatrix" [22]>
<LeftBrace    "{"           [22]>
<Identifier   "a"           [22]>
<Colon        ":"           [22]>
<Number       "1"           [22]>
<Comma        ","           [22]>
<Identifier   "b"           [22]>
<Colon        ":"           [22]>
<Number       "1"           [22]>
<Comma        ","           [22]>
<Identifier   "c"           [22]>
<Colon        ":"           [22]>
<Number       "1"           [22]>
<Comma        ","           [22]>
<Identifier   "d"           [22]>
<Colon        ":"           [22]>
<Number       "0"           [22]>
<RightBrace   "}"           [22]>
<Semicolon    ";"           [22]>
<Var          "let"         [23]>
<Identifier   "identity"    [23]>
<Equal        "="           [23]>
<Struct       "struct"      [23]>
<Identifier   "twoxtwomatrix" [23]>
<LeftBrace    "{"           [23]>
<Identifier   "a"           [23]>
<Colon        ":"           [23]>
<Number       "1"           [23]>
<Comma        ","           [23]>
<Identifier   "b"           [23]>
<Colon        ":"           [23]>
<Number       "0"           [23]>
<Comma        ","           [23]>
<Identifier   "c"           [23]>
<Colon        ":"           [23]>
<Number       "0"           [23]>
<Comma        ","           [23]>
<Identifier   "d"           [23]>
<Colon        ":"           [23]>
<Number       "1"           [23]>
<RightBrace   "}"           [23]>
<Semicolon    ";"           [23]>
<If           "if"          [24]>
<LeftParen    "("           [24]>
<Identifier   "n"           [24]>
<EqualEqual   "=="          [24]>
<Number       "0"           [24]>
<RightParen   ")"           [24]>
<LeftBrace    "{"           [24]>
<Return       "return"      [25]>
<Identifier   "identity"    [25]>
<Semicolon    ";"           [25]>
<RightBrace   "}"           [26]>
<If           "if"          [27]>
<LeftParen    "("           [27]>
<Identifier   "n"           [27]>
<LessEqual    "<="          [27]>
<Number       "1"           [27]>
<RightParen   ")"           [27]>
<LeftBrace    "{"           [27]>
<Return       "return"      [28]>
<Identifier   "baseMat"     [28]>
<Semicolon    ";"           [28]>
<RightBrace   "}"           [29]>
<Var          "let"         [31]>
<Identifier   "half"        [31]>
<Equal        "="           [31]>
<Identifier   "fib_mat"     [31]>
<LeftParen    "("           [31]>
<Identifier   "n"           [31]>
<Slash        "/"           [31]>
<Number       "2"           [31]>
<RightParen   ")"           [31]>
<Semicolon    ";"           [31]>
<Var          "let"         [32]>
<Identifier   "extra"       [32]>
<Equal        "="           [32]>
<LeftParen    "("           [32]>
<Identifier   "n"           [32]>
<Percent      "%"           [32]>
<Number       "2"           [32]>
<EqualEqual   "=="          [32]>
<Number       "0"           [32]>
<RightParen   ")"           [32]>
<QuestionMark "?"           [32]>
<Identifier   "identity"    [32]>
<Colon        ":"           [32]>
<Identifier   "baseMat"     [32]>
<Semicolon    ";"           [32]>
<Var          "let"         [34]>
<Identifier   "halfSquared" [34]>
<Equal        "="           [34]>
<Identifier   "matMult"     [34]>
<LeftParen    "("           [34]>
<Amp          "&"           [34]>
<Identifier   "half"        [34]>
<Comma        ","           [34]>
<Amp          "&"           [34]>
<Identifier   "half"        [34]>
<RightParen   ")"           [34]>
<Semicolon    ";"           [34]>
<Return       "return"      [35]>
<Identifier   "matMult"     [35]>
<LeftParen    "("           [35]>
<Amp          "&"           [35]>
<Identifier   "extra"       [35]>
<Comma        ","           [35]>
<Amp          "&"           [35]>
<Identifier   "halfSquared" [35]>
<RightParen   ")"           [35]>
<Semicolon    ";"           [35]>
<RightBrace   "}"           [36]>
<Fun          "fn"          [38]>
<Identifier   "fib"         [38]>
<LeftParen    "("           [38]>
<Identifier   "n"           [38]>
<Colon        ":"           [38]>
<SimpleType   "int"         [38]>
<RightParen   ")"           [38]>
<RightArrow   "->"          [38]>
<SimpleType   "int"         [38]>
<LeftBrace    "{"           [38]>
<Return       "return"      [39]>
<Identifier   "fib_mat"     [39]>
<LeftParen    "("           [39]>
<Identifier   "n"           [39]>
<RightParen   ")"           [39]>
<Dot          "."           [39]>
<Identifier   "b"           [39]>
<Semicolon    ";"           [39]>
<RightBrace   "}"           [40]>
<Fun          "fn"          [42]>
<Identifier   "main"        [42]>
<LeftParen    "("           [42]>
<RightParen   ")"           [42]>
<RightArrow   "->"          [42]>
<SimpleType   "int"         [42]>
<LeftBrace    "{"           [42]>
<Var          "let"         [43]>
<Identifier   "ret"         [43]>
<Equal        "="           [43]>
<Number       "0"           [43]>
<Semicolon    ";"           [43]>
<For          "for"         [44]>
<LeftParen    "("           [44]>
<Var          "let"         [44]>
<Identifier   "i"           [44]>
<Equal        "="           [44]>
<Number       "0"           [44]>
<Semicolon    ";"           [44]>
<Identifier   "i"           [44]>
<Less         "<"           [44]>
<Number       "30"          [44]>
<Semicolon    ";"           [44]>
<Identifier   "i"           [44]>
<Equal        "="           [44]>
<Identifier   "i"           [44]>
<Plus         "+"           [44]>
<Number       "1"           [44]>
<RightParen   ")"           [44]>
<LeftBrace    "{"           [44]>
<Var          "let"         [45]>
<Identifier   "f"           [45]>
<Equal        "="           [45]>
<Identifier   "fib"         [45]>
<LeftParen    "("           [45]>
<Identifier   "i"           [45]>
<RightParen   ")"           [45]>
<Semicolon    ";"           [45]>
<Identifier   "ret"         [46]>
<Equal        "="           [46]>
<Identifier   "ret"         [46]>
<Plus         "+"           [46]>
<Identifier   "f"           [46]>
<Semicolon    ";"           [46]>
<RightBrace   "}"           [47]>
<Return       "return"      [48]>
<Identifier   "ret"         [48]>
<Semicolon    ";"           [48]>
<RightBrace   "}"           [49]>
<Eof          ""            [49]>
